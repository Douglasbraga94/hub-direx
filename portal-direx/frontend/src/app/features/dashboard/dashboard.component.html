<div class="dashboard-container">
  <!-- Header -->
  <header>
    <div class="brand">
      <div class="logo" aria-hidden="true">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 3v3" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.6"/>
          <circle cx="12" cy="12" r="2.6" stroke="white" stroke-width="1.6" fill="rgba(255,255,255,0.06)"/>
          <path d="M12 21v-3" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.6"/>
        </svg>
      </div>
      <div>
        <h1>Hub de Sistemas</h1>
        <p class="lead">Acesse e gerencie todos os seus sistemas a partir deste painel.</p>
      </div>
    </div>

    <!-- Adicionando card de usuário e botão de sair -->
    <div class="controls">
      <div class="user-card">
        <div class="user-avatar">{{ getUserInitial() }}</div>
        <div class="user-info">
          <div class="user-name">{{ user?.nome || 'Usuário' }}</div>
          <div class="user-email">{{ user?.email || 'email@exemplo.com' }}</div>
        </div>
      </div>
      <button class="logout-btn" (click)="logout()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
          <polyline points="16 17 21 12 16 7"/>
          <line x1="21" y1="12" x2="9" y2="12"/>
        </svg>
        Sair
      </button>
    </div>
  </header>

  <!-- Search and Filters -->
  <div class="controls-row">
    <div class="search" role="search" aria-label="Busca de sistemas">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="opacity:.9">
        <path d="M21 21l-4.35-4.35" stroke="white" stroke-opacity="0.8" stroke-linecap="round" stroke-width="1.4"/>
        <circle cx="11" cy="11" r="6" stroke="white" stroke-opacity="0.6" stroke-width="1.4"/>
      </svg>
      <input 
        id="q" 
        placeholder="Buscar sistema, módulo ou função..." 
        [(ngModel)]="searchQuery"
      />
    </div>

    <!-- Adicionando eventos de clique e binding de classe active nos filtros -->
    <div class="filters" role="list">
      <button 
        class="chip" 
        [class.active]="activeFilter === 'all'"
        (click)="setFilter('all')"
      >
        Todos
      </button>
      <button 
        class="chip" 
        [class.active]="activeFilter === 'web'"
        (click)="setFilter('web')"
      >
        Web
      </button>
      <button 
        class="chip" 
        [class.active]="activeFilter === 'api'"
        (click)="setFilter('api')"
      >
        API
      </button>
      <button 
        class="chip" 
        [class.active]="activeFilter === 'admin'"
        (click)="setFilter('admin')"
      >
        Admin
      </button>
    </div>
  </div>

  <!-- Main Grid -->
  <main class="grid-wrap">
    <section class="hub">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:12px">
        <h2 style="margin:0">Sistemas</h2>
        <div class="muted">Mostrando <span id="count">{{ filteredSistemas.length }}</span> itens</div>
      </div>

      <div class="grid">
        <a
          *ngFor="let sistema of filteredSistemas"
          [href]="sistema.url"
          target="_blank"
          rel="noopener noreferrer"
          class="card"
        >
          <div class="icon" aria-hidden="true">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none">
              <circle cx="12" cy="12" r="6" stroke="white" stroke-opacity="0.95" stroke-width="1.2"/>
            </svg>
          </div>
          <div>
            <h3>{{ sistema.nome }}</h3>
            <p>{{ sistema.sigla }}</p>
          </div>
          <div class="meta">
            <div class="status up">Online</div>
          </div>
        </a>
      </div>

      <footer>
        Dica: clique em um cartão para abrir o sistema em nova aba. Use a busca para filtrar por nome ou descrição.
      </footer>
    </section>

    <aside class="panel" aria-label="Painel secundário">
      <h4>Atividades recentes</h4>
      <div class="list">
        <div class="item">
          <div class="badge">A</div>
          <div>
            <strong>Sistema de Vendas</strong>
            <div class="muted" style="font-size:12px">Atualizado há 2 horas</div>
          </div>
        </div>
        <div class="item">
          <div class="badge">B</div>
          <div>
            <strong>API de Pagamentos</strong>
            <div class="muted" style="font-size:12px">Erro: tempo limite</div>
          </div>
        </div>
        <div class="item">
          <div class="badge">C</div>
          <div>
            <strong>Admin Console</strong>
            <div class="muted" style="font-size:12px">Backup concluído</div>
          </div>
        </div>
      </div>

      <hr style="margin:14px 0;border:none;border-top:1px solid rgba(255,255,255,0.02)">
      
      <h4>Atalhos</h4>
      <div style="display:flex;flex-direction:column;gap:8px;margin-top:8px">
        <button class="chip">Painel Admin</button>
        <button class="chip">Dashboards</button>
        <button class="chip">Configurações</button>
      </div>
    </aside>
  </main>
</div>
